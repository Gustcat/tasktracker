# tasktracker

Система управления задачами с микросервисной архитектурой.

## Архитектура

Проект состоит из нескольких независимых сервисов и общей библиотеки:

- **Auth Service** (gRPC)  
  Отвечает за аутентификацию и управление пользователями.
    - Swagger-документация REST-эндпоинтов.
    - Экспортирует метрики в Prometheus.
    - При удалении пользователя публикует событие в Kafka.

- **Tasks Service** (HTTP, REST API)  
  CRUD-операции с задачами.
    - Подписан на события Kafka (например, удаление пользователя).

- **Shared Library**  
  Общий код: верификация токена, общий код для работы с kafka

- **(В планах) Notification Service**  
  Отправка уведомлений пользователям через события из Kafka.

Репозитории объединены через **Git Subtree**. Управление зависимостями и локальной разработкой — **Go Work**

## Развертывание

Клонировать репозиторий
```
git clone git@github.com:Gustcat/tasktracker.git
```
В корневой директории помощью правила install-deps из Makefile установите зависимости
```
make install-deps
```
В корневой директории проекта запустите сборку сети контейнеров:
```
sudo docker compose up -d
```
Миграции автоматически будут выполнены (за это отвечают контейнеры auth-migrator и tasks-migrator)

## Статус проекта

Проект находится в стадии разработки.

## Технологии

- Go 1.23
- gRPC (Protobuf 1.36.3)
- PostgreSQL 15
- Prometheus 2.37.9
- Grafana 10.0.3
- Apache Kafka
  - segmentio/kafka-go — клиентская библиотека
  - docker образ: confluentinc/cp-kafka:7.7.1
- Swagger UI (Auth Service) — автогенерация из gRPC-протоколов с помощью protoc

## API

Документация (частично, для auth-сервиса) доступна по адресу:
http://localhost:8090/swagger

## Метрики

- **Prometheus** доступен по адресу: `http://localhost:9090`
- **Grafana** доступен по адресу: `http://localhost:3000` (логин/пароль: admin/admin)
На текущий момент метрики берутся только с auth-сервиса

## TODO

- Tasks-сервис: корректное завершение процессов и оптимизация обработки задач (work pool)
- Tasks-сервис: улучшение обработки ошибок при получении уведомлений из Kafka
- Tasks-сервис: рефакторинг кода для выделения логики из main.go
- Расширение метрик Prometheus: подключение tasks-сервис и дополнение метрик auth-сервис
- Планируется Notification Service: отправка уведомлений через Kafka
- Расширить покрытие тестами: auth-сервис и tasks-сервис
- Swagger UI для tasks-сервис
- Обновление документации проекта

## Автор
https://github.com/Gustcat
